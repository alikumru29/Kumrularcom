# Disable Passenger

PassengerEnabled off

# Proxy all requests to Node.js

RewriteEngine On

# Handle API requests

RewriteCond %{REQUEST_URI} ^/api/
RewriteRule ^api/(.\*)$ http://localhost:4000/api/$1 [P,L]

# Handle all other requests

RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.\*)$ http://localhost:4000/$1 [P,L]

# Set proper headers

Header set Access-Control-Allow-Origin "\*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"
